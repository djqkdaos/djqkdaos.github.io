---
layout: post
title:  "Hadoop의 개요"
date:   2018-03-08 10:02:39
categories: jekyll
---

# Hadoop 개요
 하둡이란 대규모의 정형/비정형 데이터를 분산 처리할 수 있는 자바 기반의 오픈소스 프레임워크이며 가장 기본적인 분석 인프라이다. 하둡의 배포판으로는 클라우데라(cloudera,CDH), 호튼웍스(Hortonworks), MApR Technologies가 있다.


- 용량 부족시 추가로 서버만 연결하면 되므로 확장성이 좋다.  
- 각 서버에 분산 저장하여 데이터를 처리할 수 있다.  
- 데이터 복제본을 저장하기 때문에 유실시 복구가 가능하다.  


## 빅데이터의 3대 요소
### 1. 크기(Volume)
 일반적으로 수십 테라(tera)~수십 페타바이트(peta) 이상의 데이터를 의미한다. 데이터가 매우 크기 때문에 확장 가능한 방식으로 데이터를 저장하고 분석하는 분산 컴퓨팅 기법으로 접근해야 한다.
### 2. 속도(Velocity)
 디지털 데이터는 매우 빠른 속도로 생성되기 때문에 데이터의 생산, 저장, 유통, 수집, 분석이 실시간으로 처리돼야 한다. 또한 수집된 대량의 데이터를 장기적이고 전략적인 차원에서 분석해야 한다.
### 3. 다양성(Variety)
 다양한 종류의 데이터가 존재하며 이를 정형(structured), 반정형(semi-structured), 비정형(unstructured)으로 나눌 수 있다.
 - 정형 : 오라클과 같은 데이터 베이스
 - 반정형 : xml이나 HTML 같은 메타데이터
 - 비정형 : SNS의 사진, 메신저 대화 또는 통화 내용

---
## 하둡 분산 파일 시스템

### HDFS(Hadoop Distributed File System)#####
![Alt text](/img/hdfs.png)

 대용량 파일을 분산된 서버에 저장하고, 많은 클라이언트가 저장된 데이터를 빠르게 처리할 수 있게 설계한 파일 시스템이다. 기존 대용량 파일 시스템(DAS,NAS,SAN)과 달리 저사양 서버를 이용해 스토리지를 구성할 수 있다는 것이다. 전자상거래처럼 트랜잭션이 중요한 경우는 HDFS가 적합하지 않으며, 대규모 데이터를 저장하거나, 배치로 처리를 하는 경우에 주로 이용한다. HDFS는 __블록 구조의 파일 시스템__이다.


 	<기존 대용량 파일 시스템>
   * DAS : 서버에 직접 연결된 스토리지이며, 외장형 하드디스크와 같다.
      * NAS : 일종의 파일 서버로 안정적인 파일 저장이 필요한 경우 사용한다.
        * SAN : DAS 단점을 보완하여 고성능과 고가용성이 필요한 경우 사용한다.

### 네임노드와 데이터노드
HDFS는 마스터-슬레이브 아키텍쳐로 마스터 서버는 네임노드, 슬레이브 서버는 데이터노드이다.

__네임노드(NameNode)__
* 메타데이터 관리 : 클라이언트에 빠르게 응답할 수 있도록 메모리에 전체 메타데이터를 로딩해서 관리한다.
* 데이터노드 모니터링 : 3초마다 하트비트 메세지를 전송한다. 하트비트는 데이터노드 상태 정보와 데이터 노드에 저장되어 있는 블록의 목록으로 구성된다.
* 블록 관리 : 장애가 발생한 데이터노드의 블록을 새로운 데이터노드로 복제한다. 또 용량이 부족하면 여유있는 데이터노드로 블록을 이동시킨다.
* 클라이언트 요청 접수 : 클라이언트가 HDFS에 접근하려면 반드시 네임노드에 먼저 접속해야 한다. HDFS에 파일을 저장할 경우 기존 파일의 저장여부와 권한 확인 절차를 거쳐 저장을 승인한다.

__데이터노드(DataNode)__
클라이언트가 HDFS에 저장하는 파일을 로컬 디스크에 유지한다. 첫 번째 파일은 실제 데이터가 저장되어 있는 row data이며, 두 번째 파일은 checksum이나 파일 생성일자와 같은 메타데이터가 설정되어 있다.

---
## 맵리듀스(MapReduce)
![Alt text](/img/mapreduce.png)

HDFS에 저장된 파일을 분산 배치 분석을 할 수 있게 도와주는 프레임워크이다. 주로 분산 처리를 담당한다. 맵리듀스 프로그래밍 모델은 맵(Map)과 리듀스(Reduce) 두 단계로 데이터를 처리한다.

* 맵 : 입력 파일을 한 줄씩 읽어서 데이터 변형(transformation)  
* 리듀스 : 맵의 결과 데이터를 집계(aggregation)

### 클라이언트
 사용자가 실행한 맵리듀스 프로그램과 하둡에서 제공하는 맵리듀스 API를 의미하며 사용자는 이를 통해 개발한 프로그램을 하둡에서 실행할 수 있다.
### 잡트래커
 클라이언트가 하둡으로 실행한 맵리듀스 프로그램은 잡(job)이라는 하나의 작업 단위로 관리된다. 잡트래커는 하둡 클러스터에 등록된 전체 잡의 스케줄링을 관리하고 모니터링한다.
### 태스크트래커
 사용자가 설정한 맵리듀스 프로그램을 실행하며, 하둡의 데이터노드에서 실행되는 데몬이다. 태스크트래커는 잡트래커의 작업을 요청받고, 잡트래커가 요청한 맵과 리듀스 개수만큼 맵 태스크와 리듀스태스크를 생성한다.
